<% layout("layouts/AdminBoilerplate") %>

<h1 class="mb-4">Manage Users</h1>

<ul class="list-group">
  <% users.forEach(user => { %>
    <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
      <div>
        <strong><%= user.username %></strong> â€” <%= user.email %>
        <% if (user.isBlocked) { %>
          <span class="badge bg-danger ms-2">Blocked</span>
        <% } %>
      </div>
      <div>
        <a href="/admin/users/<%= user._id %>" class="btn btn-info btn-sm me-2">View</a>

<% if(user.isBlocked){ %>
  <form method="POST" action="/admin/users/<%= user._id %>/block?_method=PUT" class="d-inline">
    <button type="submit" class="btn btn-warning btn-sm me-2">Unblock</button>
  </form>
<% } else { %>
  <form method="POST" action="/admin/users/<%= user._id %>/block?_method=PUT" class="d-inline">
    <button type="submit" class="btn btn-secondary btn-sm me-2">Block</button>
  </form>
<% } %>

        <form method="POST" action="/admin/users/<%= user._id %>?_method=DELETE" class="d-inline">
          <button type="submit" class="btn btn-danger btn-sm">Delete</button>
        </form>
      </div>
    </li>
  <% }) %>
</ul>

<style>
  body{
    background: linear-gradient(to right, #e0f7fa, #e6fffa);
  color: #333;


  }
  
  .list-group {
    max-width: 900px;
    margin: auto;
    padding: 0;
    list-style: none;
  }

  .list-group-item {
    background: #fff;
    border-radius: 8px;
    padding: 12px 20px;
    margin-bottom: 12px;
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
  }

  .btn {
    font-size: 0.85rem;
    font-weight: 600;
    padding: 6px 12px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    transition: background-color 0.25s ease;
  }

  .btn-info { background-color: #0ea5e9; color: #fff; }
  .btn-info:hover { background-color: #0284c7; }

  .btn-warning { background-color: #f59e0b; color: #fff; }
  .btn-warning:hover { background-color: #b45309; }

  .btn-secondary { background-color: #64748b; color: #fff; }
  .btn-secondary:hover { background-color: #475569; }

  .btn-danger { background-color: #ef4444; color: #fff; }
  .btn-danger:hover { background-color: #b91c1c; }

  .badge {
    font-weight: 700;
    font-size: 0.8rem;
    padding: 4px 8px;
    border-radius: 12px;
  }

  .ms-2 { margin-left: 0.5rem !important; }
  .me-2 { margin-right: 0.5rem !important; }
</style>
